package com.tl.hades.persist;

import com.ls.pf.base.utils.tools.StringUtils;

import java.io.DataInputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.Socket;
import java.util.Scanner;

public class SocketUtil {
//	public static final String IP_ADDR = "10.230.26.61";//10.231.13.150  10.230.27.202  10.230.26.61
//	public static final int PORT = 9528; //服务器端口号 9529 9527  9528
	
//	public static final String IP_ADDR = "10.231.13.150";
//	public static final int PORT = 9529;
//	本地前置代码
//	public static final String IP_ADDR = "10.231.13.156";
//	public static final int PORT = 9529; 
	
//	public static final String IP_ADDR = "10.230.26.76";
//	public static final int PORT = 9527;
	
//	不要改，需要自己添加
	public static final String IP_ADDR = "10.230.27.202";
	public static final int PORT = 9527; 
	

	
	public static void main(String[] args) {
		System.out.println("INITIATED...");
		Socket socket = null;
		try {
			socket = new Socket(IP_ADDR, PORT);
			// 读取服务器端数据
			DataInputStream input = new DataInputStream(socket.getInputStream());
			DataOutputStream output = new DataOutputStream(
					socket.getOutputStream());
			RevThread recvThread = new RevThread(input);
			recvThread.start();
			SendThread sendThread = new SendThread(output);
			sendThread.start();
		} catch (Exception e1) {
			e1.printStackTrace();
		}

		try {
			//创建一个流套接字并将其连接到指定主机上的指定端口号
			while (true) {
				Thread.sleep(1000);
			}
		} catch (Exception e) {
			System.out.println("CLIENT MISBEHAVIOR:" + e.getMessage());
			e.printStackTrace();
		} finally {
			if (socket != null) {
				try {
					socket.close();
				} catch (IOException e) {
					socket = null;
					System.out.println("CLIENT MISBEHAVIOR:" + e.getMessage());
				}
			}
		}
	}
}

class RevThread extends Thread {

	DataInputStream is;

	public RevThread(DataInputStream is) {
		this.is = is;
	}

	@Override
	public void run() {
		try {
			while (true) {
				byte[] bytes = new byte[1024];
				is.read(bytes);
				System.out.println("RETURN FROM SERVER: " + new String(bytes));
				Thread.sleep(10);
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	}
}

class SendThread extends Thread {

	DataOutputStream os;

	public SendThread(DataOutputStream os) {
		this.os = os;
	}

	@SuppressWarnings("static-access")
	@Override
	public void run() {
		try {
			Scanner scanner = new Scanner(System.in);
			while (true) {
//				String infoMasterCert = "68C40083050810220916200077E8880226016012030003006042020000202A02000150040200010010020001031C07E1081700000055070511111111111101010105060000000006000000000600000000060000000006000000001C07E10817000000550705000002327732010101050600002718060000000006000019D506000000000600000D421C07E108170000005507050000197561430101010506000000C90600000000060000004106000000870600000000000107E10817000500010005482016";
//				String infoEvent = "684A00830508102209162000B133880208013114020003002022020000201E02000020200200010106000000001C07E108150A0B2D1C07E108150A0B2D000107E108150A0B2E010005B73C16";
//				String infoEsam = "685100C30521001070010010D9DD85023E03F1000200010908520200000005DD3AF100040001091000000000000000000000000000000000F100070001020306000000880600000000060000000000008A8216";
//				String infoMasterCert ="A81A000100060000000000000000000000000A006AB9660EA97A0100684A004A0068C925078D03000279000004005052142862185C16";
//				String infoMasterCert = "A81A000100060000000000000000000000000A006AB9660EA97A01006866006600688811415500020DED0101041A9D3334EEEEEEEE9D33340928003C16";
				String C161 = "A862000100030000000000000000000000000AA9A5678B8007000000686A016A01688802150B00060DE2020101140406180600050618040000000000000000000000000000000000000000000000000001010114040618EEEEEEEEEE04EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE5246331505000C16";
				String c161_9251 = "A83C000100010000000000000000000000000AA43A8AB8FF7C5D000068D200D20068880241FB28020DEE01030114050918110006091804004546831900727352020094366005004257020800377867034E12541506008016";
				String erc14 = "A82A000100010000000000000000000000000A01474A53801F320000688A008A0068C81141000F000EF00000010089C488890E0A011722041801172204180004021722008916";
				//0001FF00当前正向有功
				String a10f1="A843000100010000000000000000000000000AA6CF89A71A437F000068EE00EE0068A81241899E0210FA000001000124006880564804000168911833323433A4975C33B7CC38336A7B36338B3B3B33C43A453318160D000A54451025007F16";
				//0002FF00 当前反向有功
				String a10f2="A843000100010000000000000000000000000AA6CF89A71A437F000068EE00EE0068A81241899E0210FA00000100012400"
						+ "6880564804000168911833323533A4975C33B7CC38336A7B36338B3B3B33C43A45331916"
						+ "0D000A54451025008116";
				
				//0003FF00组合无功1 =正向无功
				String a10f3="A843000100010000000000000000000000000AA6CF89A71A437F000068EE00EE0068A81241899E0210FA00000100012400"
						+ "6880564804000168911833323633A4975C33B7CC38336A7B36338B3B3B33C43A45331A16"
						+ "0D000A54451025008316";
				
				//0004FF00组合无功2=反向无功
				String a10f4="A843000100010000000000000000000000000AA6CF89A71A437F000068EE00EE0068A81241899E0210FA00000100012400"
						+ "6880564804000168911833323733A4975C33B7CC38336A7B36338B3B3B33C43A45331B16"
						+ "0D000A54451025008516";
				//A相电压
				String Avol= "A840000100020000000000000000000000000AA4CC18C5F9EB7F000068E200E200"
						+ "684B1141899E0410FE00000100016BDA5A1000"
						+ "6855793802000168110433343435BE16"
						+ "000000000000000000000000000000004E4809112500EE16";
				//电表全事件-开表盖记录
				String gai = "A86D000100020000000000000000000000000B04F0483EE0BC100000"
						+ "689601960168887103971F0410E8000001001F5000FEFEFEFE"
						+ "68812720000001689140344063363333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333336B16"
						+ "2822151526009C16";
				
				//水汽热 0DF220 抄表日
				String shui= "A8500001000F0000000000000000000000000AAAC4F8F3E9D1000000"
						+ "682201220168A871031C731E0DEA8003101B2504180500260418302C003705002C00370500EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE7255014805002604182000002113BA35172026007316";
				
				
				String ABCxiang= "A811010100050000000000000000000000000A0171760AA4E933000068260426046888144117180A0DE00201010A00000606180150961800691700051700371600261500011500571400781300911200651200381200881100111200641100061100901000011000730900131000660900430900411000371000521000811000241200061300761400841400771400251500371700001900152100592200372400212300132300432400792300082400892300852200482200312200142300952300872400162600532700012900782800972900903000853000433100502900142700712700642700932200762200262400272400562400072600512700312800932600732600042700712700412500382600222400442300662300092400712400EEEEEE7003451906006E16";
				
				
				String sanxiang = "A85F000100020000000000000000000000000AA68A242B6A895A0100"
				+"68AE00AE006888021511000610E5000001001F16006811917937000068910A3332343544556677889922161514131211009B16";
				
				
				String ssss = "A830000100030000000000000000000000000AA9A5672B8B06000000"
						+ "68A200A200688802150B000610E200000100011300"
						+ "FE681191793700006891063334343569564816"
						+ "8208311927005616";
				
				String aaa = "A830000100030000000000000000000000000AA9A5672B8B06000000"
						+ "68A200A200688802150B000610E200000100011300"
						+ "FE681191793700006891063335343569564916"
						+ "8208311927005816";
				//0CF2终端日历时钟
				String aCf2 = "A822000100130000000000000000000000000AB37BF41F07750C0000686A006A0068A81407B855260CED000002004000222728180955FD40002227009E16";
				//0400010C 年月日时分秒星期
				String trans0400010C = "A836000100050000000000000000000000000B04A9994FDB6C3F000068BA00BA0068A80841AFDE0A10F4000001000317006831655709000068910B3F3433378A8A4C35473B4BA1161F55A44459191400E116";
				String trans04000101 = "A82e000100030000000000000000000000000AA9A5672B8B06000000689A009A006888021511000610E5000001001F1100681191793700006891053434333733BD16151413121100CB16";
//				全事件剩余报文总结
				String trans21000001 = "A8450001000C0000000000000000000000000AA25ADD49EC8915000068F600F60068883241C42E1810E100000100012800FEFEFEFE6836160332000068911833323433BBB6333369443333C734333354483333678833336816D124281828005B16";
				String trans03360001 = "A841000100140000000000000000000000000AA31FDCBC682A24000068E600E60068880107DC4F2810E4000001001F240068065897080000689118333234336936A73333333333B85383333333333384B55633D616D424121027001E16";
				String trans03340001 = "A841000100140000000000000000000000000AAD9C649FAEC160000068E600E6006888060871542810ED000001001F240068206747220000689118333234336736353333333333376C343333333333639733333C16CD4013132900AE16";
				//34323349
				String trans1600FF01 = "A8BC000100030000000000000000000000000AA9A5672B8B0600000068D200D20068D202D2026888021511000610E5000001001F9F0068119179370000689193343233496C6C4C343A4B333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333336C7C4C343A4B333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333330B16151413121100F516";
				
				String trans03301301 = "A851000100030000000000000000000000000AA9A5672B8B0600000068260126016888021511000610E5000001001F340068119179370000689128344663363333333333333333333333333333333333333333333333333333333333333333333333331A16151413121100A816";
				String trans03300501 = "A861000100030000000000000000000000000AA9A5672B8B0600000068660166016888021511000610E5000001001F44006811917937000068913834386336333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333334C161514131211001C16";
				String trans2000FF01 = "A88c000100030000000000000000000000000AA9A5672B8B0600000068120212026888021511000610E5000001001F6F0068119179370000689163343233533333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333EF161514131211008D16";
				String trans1F00FF01 = "A859000100030000000000000000000000000AA9A5672B8B0600000068460146016888021511000610E5000001001F3C00681191793700006891303432335233333333333333333333333333333333333333333333333333333333333333333333333333333333333333339216151413121100A016";
				String trans03120201 = "A841000100030000000000000000000000000AA9A5672B8B0600000068E600E6006888021511000610E5000001001F240068119179370000689118343545363333333333333333333333333333333333333333AB16151413121100BA16";
				String trans1801FF01 = "A8e0000100030000000000000000000000000AA9A5672B8B0600000068620362036888021511000610E5000001001FC300681191793700006891B73432344B3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333F816151413121100F316";
				
				//0DF27日电压统计
				String UADF27k30 = "A85F000100020000000000000000000000000AA68A242B6A895A0100"
						+ "685E015E01688803415E2F040DEA020104032804180000A0050000A00500000000A0050000A00500000000A0050000A00500006410010328381031102800000000280000000028631001032837104610285410000054105A15582129005E16";
				String UADF27k39 = "A874000100030000000000000000000000000AA9A5672B8B06000000"
						+ "68B201B20168C4800745C5000D6601010403000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D116";

//				//终端发出  来自启动站-------未入队列
				String D81  = "68E604E60468D802171800060DE40103010A36183107180160EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE3112002412003212002812005112003712005012004412003312003712001812003012003012001912002612003712002512003912003712003712003312003212002912003312001312000212009511000012009711000012009811009811001312000512000112008433391801006D16";
				String zaD81  = "A841010100030000000000000000000000000AA9A5672B8B0600000068E604E60468D802171800060DE40103010A36183107180160EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE311200241200321200281200511200371200501200441200331200371200181200301200301200191200261200371200251200391200371200371200331200321200291200331200131200021200951100001200971100001200981100981100131200051200011200843339180100E516";
				//终端发出  来自从动站--------入队列
				String D081 = "68E604E604689802171800060DE40103010A36183107180160EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE311200241200321200281200511200371200501200441200331200371200181200301200301200191200261200371200251200391200371200371200331200321200291200331200131200021200951100001200971100001200981100981100131200051200011200843339180100A516";
				String aD081 = "A841010100030000000000000000000000000AA9A5672B8B0600000068E604E604689802171800060DE40103010A36183107180160EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE311200241200321200281200511200371200501200441200331200371200181200301200301200191200261200371200251200391200371200371200331200321200291200331200131200021200951100001200971100001200981100981100131200051200011200843339180100A516";

				String C13 ="A81E000100030000000000000000000000000AA9A567F48C06000000685A005A00688802150B00060CEF00001001000000004F08430930008F16";
				String ccc13 = "A825000100030000000000000000000000000AA9A5672B8B0600000068aa00aa0068C4800745C5000C66000010010001000100000000000000000000000000da16"	;
				
//				String STR=c161_9251;//数据项
			String STR="A886000100030000000000000000000000000AA9AA5359CE0600000068FA01FA0168881141F736060CEB0101040602020269820100860179820160820192850174820100000000000000000094039748360193275000413924014727500053765002000050008057010129330001351995006632000154551501353300014563630090015001673467006803500198678400140050017D9332765B4321160500F516";//数据项
				byte[] data = StringUtils.decodeHex(STR);
				
				os.write(data);
	
				os.flush();
				System.out.println("TERMINAL_SIM==" + STR);
//				if(scanner.hasNext()) {
//					String command = scanner.next().trim();
//					if(command.equals("continue")) {
//						continue;
//					}
//				} else {
//					Thread.currentThread().holdsLock(this);
//				}
				Thread.sleep(60000);
			}
		} catch (Exception e) {
			e.printStackTrace();
		}

	}

}
